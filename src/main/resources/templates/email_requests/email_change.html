<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Confirm Email Change</title>

    <style>
        /* Essential reset for cross-client compatibility */
        body, table, td, a {
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
        }
        table, td {
            mso-table-lspace: 0pt;
            mso-table-rspace: 0pt;
            border-collapse: collapse;
        }
        /* Hover effects (optional, supported by some clients) */
        .btn-confirm:hover { background-color: #157347 !important; }
        .btn-decline:hover { background-color: #f8f9fa !important; color: #dc3545 !important; }
    </style>
</head>
<body style="margin: 0; padding: 0; background-color: #f7f7f7;">

<table border="0" cellpadding="0" cellspacing="0" width="100%" role="presentation" style="background-color: #f7f7f7;">
    <tr>
        <td align="center" style="padding: 40px 10px;">

            <table width="100%" border="0" cellpadding="0" cellspacing="0"
                   style="max-width: 600px; background-color: #ffffff; border-radius: 8px; border: 1px solid #e5e5e5; font-family: Arial, sans-serif;"
                   role="presentation">
                <tr>
                    <td style="padding: 40px 30px; text-align: center;">

                        <h2 style="color: #212529; margin: 0 0 16px 0; font-size: 24px; font-weight: 600;">
                            Update your email address
                        </h2>

                        <p style="font-size: 16px; line-height: 1.5; color: #495057; margin: 0 0 25px 0;">
                            Hi <strong>{{ user_name }}</strong>, we received a request to change the email associated
                            with your account to <br>
                            {% if new_email is defined %}
                            <strong style="color: #0d6efd;">{{ new_email }}</strong>.
                            {% endif %}
                        </p>

                        <table border="0" cellpadding="0" cellspacing="0" role="presentation" width="100%">
                            <tr>
                                <td align="center">

                                    <table border="0" cellpadding="0" cellspacing="0" role="presentation"
                                           style="display: inline-block; margin-bottom: 10px;">
                                        <tr>
                                            <td align="center" style="border-radius: 6px; background-color: #198754;">
                                                <a href="{{ confirm_link }}"
                                                   target="_blank"
                                                   style="display: block; background-color: #0d6efd; color: #ffffff; padding: 14px 28px; border-radius: 6px; text-decoration: none; font-size: 16px; font-weight: bold; border: 1px solid #198754;">
                                                    Confirm New Email
                                                </a>
                                            </td>
                                        </tr>
                                    </table>

                                    <span style="display: inline-block; width: 10px;">&nbsp;</span>

                                </td>
                            </tr>
                        </table>

                        <hr style="border: 0; border-top: 1px solid #eee; margin: 30px 0;">

                        <p style="font-size: 13px; color: #6c757d; line-height: 1.4;">
                            <strong>Didn't request this change?</strong><br>
                            If you did not request this, please click "Decline Request" and consider changing your
                            password immediately to keep your account secure.
                        </p>

                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
</body>
</html>